<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lab: 使用 HTTP API 操作 Github issues | 木犀 101</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="木犀沉淀的互联网学习入门指南">
    
    <link rel="preload" href="/101/assets/css/0.styles.468aa852.css" as="style"><link rel="preload" href="/101/assets/js/app.e846d27b.js" as="script"><link rel="preload" href="/101/assets/js/2.62095aff.js" as="script"><link rel="preload" href="/101/assets/js/12.368e3d38.js" as="script"><link rel="prefetch" href="/101/assets/js/10.fcbd24e6.js"><link rel="prefetch" href="/101/assets/js/11.5b37a291.js"><link rel="prefetch" href="/101/assets/js/13.991ddc31.js"><link rel="prefetch" href="/101/assets/js/14.7a3837af.js"><link rel="prefetch" href="/101/assets/js/15.5d307abe.js"><link rel="prefetch" href="/101/assets/js/16.dcebab3d.js"><link rel="prefetch" href="/101/assets/js/17.7d9998d2.js"><link rel="prefetch" href="/101/assets/js/18.d6632dd6.js"><link rel="prefetch" href="/101/assets/js/19.f67f1073.js"><link rel="prefetch" href="/101/assets/js/20.31298780.js"><link rel="prefetch" href="/101/assets/js/21.a445b245.js"><link rel="prefetch" href="/101/assets/js/22.8d9aef1d.js"><link rel="prefetch" href="/101/assets/js/23.61c5a46c.js"><link rel="prefetch" href="/101/assets/js/24.730654fb.js"><link rel="prefetch" href="/101/assets/js/25.a93260ec.js"><link rel="prefetch" href="/101/assets/js/26.40172075.js"><link rel="prefetch" href="/101/assets/js/27.0e7cb050.js"><link rel="prefetch" href="/101/assets/js/28.1cbc516b.js"><link rel="prefetch" href="/101/assets/js/29.2bd554c3.js"><link rel="prefetch" href="/101/assets/js/3.77bdc59d.js"><link rel="prefetch" href="/101/assets/js/30.9183ae20.js"><link rel="prefetch" href="/101/assets/js/31.07563caa.js"><link rel="prefetch" href="/101/assets/js/32.7c5fa521.js"><link rel="prefetch" href="/101/assets/js/33.58ae898d.js"><link rel="prefetch" href="/101/assets/js/34.25b7c5be.js"><link rel="prefetch" href="/101/assets/js/35.e7c0fc1f.js"><link rel="prefetch" href="/101/assets/js/36.78b758a4.js"><link rel="prefetch" href="/101/assets/js/37.988694a6.js"><link rel="prefetch" href="/101/assets/js/38.5c532b03.js"><link rel="prefetch" href="/101/assets/js/39.5cac79ed.js"><link rel="prefetch" href="/101/assets/js/4.2d395967.js"><link rel="prefetch" href="/101/assets/js/40.7264971d.js"><link rel="prefetch" href="/101/assets/js/41.79e10bbd.js"><link rel="prefetch" href="/101/assets/js/42.d2f8c35d.js"><link rel="prefetch" href="/101/assets/js/43.40e77d43.js"><link rel="prefetch" href="/101/assets/js/44.1dcb58dd.js"><link rel="prefetch" href="/101/assets/js/45.c7616dc0.js"><link rel="prefetch" href="/101/assets/js/46.e94ba3cd.js"><link rel="prefetch" href="/101/assets/js/47.f623bb5f.js"><link rel="prefetch" href="/101/assets/js/48.a881b6e7.js"><link rel="prefetch" href="/101/assets/js/49.27b07f6a.js"><link rel="prefetch" href="/101/assets/js/5.de44bd6c.js"><link rel="prefetch" href="/101/assets/js/50.26a4d27b.js"><link rel="prefetch" href="/101/assets/js/51.93d76270.js"><link rel="prefetch" href="/101/assets/js/52.7cda6b50.js"><link rel="prefetch" href="/101/assets/js/53.92f88595.js"><link rel="prefetch" href="/101/assets/js/54.a4f8674c.js"><link rel="prefetch" href="/101/assets/js/55.d85521b8.js"><link rel="prefetch" href="/101/assets/js/56.43fdbeb5.js"><link rel="prefetch" href="/101/assets/js/57.408f3691.js"><link rel="prefetch" href="/101/assets/js/58.1d6b5f7b.js"><link rel="prefetch" href="/101/assets/js/59.1ceea8b4.js"><link rel="prefetch" href="/101/assets/js/6.2fef63e8.js"><link rel="prefetch" href="/101/assets/js/60.9bcb17b1.js"><link rel="prefetch" href="/101/assets/js/61.b496143d.js"><link rel="prefetch" href="/101/assets/js/62.d6745da0.js"><link rel="prefetch" href="/101/assets/js/63.85e9dd75.js"><link rel="prefetch" href="/101/assets/js/64.f951e5e5.js"><link rel="prefetch" href="/101/assets/js/65.304ecc5d.js"><link rel="prefetch" href="/101/assets/js/66.7c1618ef.js"><link rel="prefetch" href="/101/assets/js/7.fd59375b.js"><link rel="prefetch" href="/101/assets/js/8.8f25dafa.js"><link rel="prefetch" href="/101/assets/js/9.25f49b1a.js">
    <link rel="stylesheet" href="/101/assets/css/0.styles.468aa852.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/101/" class="home-link router-link-active"><!----> <span class="site-name">木犀 101</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/101/fe/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/101/mobile/" class="nav-link">
  移动端
</a></div><div class="nav-item"><a href="/101/be/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/101/product/" class="nav-link">
  产品
</a></div><div class="nav-item"><a href="/101/design/" class="nav-link">
  设计
</a></div><div class="nav-item"><a href="/101/cs/" class="nav-link">
  计算机基础
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/101/fe/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/101/mobile/" class="nav-link">
  移动端
</a></div><div class="nav-item"><a href="/101/be/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/101/product/" class="nav-link">
  产品
</a></div><div class="nav-item"><a href="/101/design/" class="nav-link">
  设计
</a></div><div class="nav-item"><a href="/101/cs/" class="nav-link">
  计算机基础
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前端</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/101/fe/" aria-current="page" class="sidebar-link">前端组简介</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>学习路线</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/101/fe/freshmen_fall.html" class="sidebar-link">大一上学期</a></li><li><a href="/101/fe/freshmen_spring.html" class="sidebar-link">大一下学期</a></li><li><a href="/101/fe/sophomore_fall.html" class="sidebar-link">大二上学期</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>项目开发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/101/fe/project.html" class="sidebar-link">前端项目须知</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>专题学习</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/101/fe/react_road_map.html" class="sidebar-link">React 学习指南</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>基础话题</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/101/fe/component.html" class="sidebar-link">组件化</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>Labs</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/101/fe/lab_http.html" aria-current="page" class="active sidebar-link">Lab: 使用 HTTP API 操作 Github issues</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/101/fe/lab_module.html" class="sidebar-link">Lab: 使用 Webpack 对 JS 应用进行构建</a></li><li><a href="/101/fe/lab_hyperapp.html" class="sidebar-link">Lab: 使用 Hyperapp 编写 TodoList</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="lab-使用-http-api-操作-github-issues"><a href="#lab-使用-http-api-操作-github-issues" class="header-anchor">#</a> Lab: 使用 HTTP API 操作 Github issues</h1> <h3 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h3> <p>在学习了 HTTP 的理论知识，以及 Restful API 规范，JSON 格式等相关知识之后，我们了解到，可以通过 HTTP 协议在网络中传输数据。这是网页/App 和后端服务通信的最常见的方式。</p> <p>但除非进行 App 开发的实战，不然我们对这种前后端通信方式还是没有实际的感觉。因此这个 Lab 就利用了现成的后端服务：Github，来让我们动手发送 HTTP 请求，调用各种 API 来完成一些操作。</p> <p>Github 提供了开放 API，也就是说他把 API 的路径和调用方式都写成了文档，为的是第三方开发者可以开发 Github 相关的功能。</p> <p>这次我们将通过 API 的方式来完成 Github 仓库 issue 的查看，创建，更新和删除。这些操作可以直接在网页上完成，但我们这次不使用页面，而是直接通过 HTTP 调用完成。</p> <blockquote><p>注意：Github 的 API 可能随着时间变化，版本有更新，所以文中有些内容不一定是准确的。在执行的时候需要对照 Github 的文档执行。</p></blockquote> <h3 id="准备工作"><a href="#准备工作" class="header-anchor">#</a> 准备工作</h3> <ul><li>注册 Github 账号</li> <li>HTTP/Rest API/JSON 等相关知识学习</li> <li>新建一个 Github 仓库 restapi-lab</li> <li>下载安装一个 Postman</li> <li>对一个开源项目来说，issue 主要是作为问题追踪器存在的，也兼备讨论区的功能。对我们来说，可以暂时把 issue 理解为一个开放的讨论区，可以发帖（创建 issue），评论 等等。这样会更好理解一些。</li></ul> <h3 id="创建-personal-token"><a href="#创建-personal-token" class="header-anchor">#</a> 创建 Personal Token</h3> <p>大家在看 HTTP 协议的时候，应该也看到了 HTTP 可以携带一些认证信息。利用 <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Authorization" target="_blank" rel="noopener noreferrer">Authorization<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 这个 Header，我们可以使用规定的格式，编码一些用户信息，传给服务端。Authorization 字段的格式，比如直接传递用户名和密码的 <a href="https://tools.ietf.org/html/rfc7617" target="_blank" rel="noopener noreferrer">Basic<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 格式或者通过 Token 认证的 Bearer token 这样的机制。</p> <p>传递这个信息的目的是显而易见的。如果没有认证信息，服务端就不知道发起请求的人是谁，就无法完成一些需要权限的操作。一个用户想要创建一个 issue，显然只有登录用户自己的账号才可以。其他人不能冒名顶替。所以 Authorization 字段传递的就是当前认证（登录）的用户的信息。</p> <p>Github 支持 Basic 和 Bearer 两种模式，Bearer 是更推荐使用的，因为传递 Token 比直接传输密码更安全。</p> <p>在 Github 中，为了防止密码泄露的风险，我们可以创建一个 Personal Token，可以理解为一个临时的密码，用来在 API 调用中进行认证。比直接使用密码要更安全。如果这个 token 泄露，我们可以随时把 token 置为失效。</p> <p>创建 Personal Token 可以参考<a href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/creating-a-personal-access-token" target="_blank" rel="noopener noreferrer">教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。需要注意的是 Github 上的 Personal Token 一旦创建，后面关闭页面以后就再也拿不到了（类似阅后即焚）。需要自己保存好。这也是一个安全上的考虑。</p> <p>有了 Personal Token 之后，我们可以在 Postman 发送一个请求来测试 Token 是否有效。</p> <p>在 Postman 发送一个 GET 请求到 <code>https://api.github.com</code>。Authorization 的 Type 选择 Bearer Token，然后在 Token 输入框里面填入刚才拿到的 Personal Token。点击 Send 发送！</p> <p>如果一切正常，你就可以看到这样的返回。如果返回了 401 或者其他状态码，就说明 Personal Token 有误。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;current_user_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/user&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;current_user_authorizations_html_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://github.com/settings/connections/applications{/client_id}&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;authorizations_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/authorizations&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;code_search_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/search/code?q={query}{&amp;page,per_page,sort,order}&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;commit_search_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/search/commits?q={query}{&amp;page,per_page,sort,order}&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;emails_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/user/emails&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;emojis_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/emojis&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;events_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/events&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;feeds_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/feeds&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;followers_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/user/followers&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;following_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/user/following{/target}&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;gists_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/gists{/gist_id}&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;hub_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/hub&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;issue_search_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/search/issues?q={query}{&amp;page,per_page,sort,order}&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;issues_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/issues&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;keys_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/user/keys&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;label_search_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/search/labels?q={query}&amp;repository_id={repository_id}{&amp;page,per_page}&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;notifications_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/notifications&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;organization_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/orgs/{org}&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;organization_repositories_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/orgs/{org}/repos{?type,page,per_page,sort}&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;organization_teams_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/orgs/{org}/teams&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;public_gists_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/gists/public&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;rate_limit_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/rate_limit&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;repository_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/repos/{owner}/{repo}&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;repository_search_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/search/repositories?q={query}{&amp;page,per_page,sort,order}&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;current_user_repositories_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/user/repos{?type,page,per_page,sort}&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;starred_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/user/starred{/owner}{/repo}&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;starred_gists_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/gists/starred&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;user_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/users/{user}&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;user_organizations_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/user/orgs&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;user_repositories_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/users/{user}/repos{?type,page,per_page,sort}&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;user_search_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/search/users?q={query}{&amp;page,per_page,sort,order}&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>关于 Basic vs Bearer 两种 Authorization 格式的优劣对比，可以参考这个 <a href="https://stackoverflow.com/questions/34013299/web-api-authentication-basic-vs-bearer" target="_blank" rel="noopener noreferrer">Stack Overflow 回答<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h3 id="创建-issue"><a href="#创建-issue" class="header-anchor">#</a> 创建 issue</h3> <p>我们可以在 Github API 文档中找到 <a href="https://docs.github.com/en/free-pro-team@latest/rest/reference/issues#create-an-issue" target="_blank" rel="noopener noreferrer">Create an Issue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 这个 API。</p> <p><img src="/101/assets/img/create-issue.31c7cdcf.png" alt="create"></p> <p>我们看到请求方法的 POST。路径是 <code>/repos/{owner}/{repo}/issues</code>。其中 owner 就是你自己的 Github 账户名（id，不是邮箱），repo 是之前我们创建的 restapi-lab。这边只给了一个路径，域名没有写，域名就是 Github 的 API 主域名： <code>https://api.github.com</code>。</p> <p>所以最后完整的 URL 是 <code>https://api.github.com/repos/{owner}/{repo}/issues</code>，注意替换里面的参数。</p> <p>在 Postman 中发送这个请求，同时也要带上之前的拿到的 Token。</p> <p>这是一个 POST 请求，所以需要有请求体。这个请求的参数我们在 API 文档中也可以看到，是一个表格。里面有很多创建 issue 需要的参数。但其实只有一个是必填的。</p> <div class="language- extra-class"><pre class="language-text"><code>title	string	body	Required. The title of the issue.
</code></pre></div><p>就是标题，这里写了 Required。其他的参数比如 labels 是 issue 的标签，body 是 issue 的详情描述。这些都是可选的。在页面上发 issue 的时候也可以看出来。只填一个标题就行了。在未来的应用开发中，我们也可能会有一些 API 的参数是可选的，这主要是根据实际的业务需求来设计的。</p> <p>所以我们先传这个参数。Github 的 API 的请求题都是基于 JSON 格式传输的。在 Postman 中我们可以在 Body 中选择 raw 然后选择 JSON。在编辑器里输入 JSON 格式的参数：</p> <p><img src="/101/assets/img/json-post.c8c4b8b6.png" alt="json-post"></p> <p>点发送，成功的返回如下：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/repos/zxc0328/restapi-lab/issues/4&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;repository_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/repos/zxc0328/diary&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;labels_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/repos/zxc0328/restapi-lab/issues/4/labels{/name}&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;comments_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/repos/zxc0328/restapi-lab/issues/4/comments&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;events_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/repos/zxc0328/restapi-lab/issues/4/events&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;html_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://github.com/zxc0328/restapi-lab/issues/4&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">760262711</span><span class="token punctuation">,</span>
	<span class="token property">&quot;node_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MDU6SXNzdWU3NjAyNjI3MTE=&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;number&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
	<span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;user&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;login&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zxc0328&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">10339692</span><span class="token punctuation">,</span>
		<span class="token property">&quot;node_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MDQ6VXNlcjEwMzM5Njky&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;avatar_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://avatars0.githubusercontent.com/u/10339692?v=4&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;gravatar_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/users/zxc0328&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;html_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://github.com/zxc0328&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;followers_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/users/zxc0328/followers&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;following_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/users/zxc0328/following{/other_user}&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;gists_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/users/zxc0328/gists{/gist_id}&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;starred_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/users/zxc0328/starred{/owner}{/repo}&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;subscriptions_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/users/zxc0328/subscriptions&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;organizations_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/users/zxc0328/orgs&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;repos_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/users/zxc0328/repos&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;events_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/users/zxc0328/events{/privacy}&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;received_events_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com/users/zxc0328/received_events&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;User&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;site_admin&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;labels&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;locked&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token property">&quot;assignee&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
	<span class="token property">&quot;assignees&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token property">&quot;milestone&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
	<span class="token property">&quot;comments&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
	<span class="token property">&quot;created_at&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-12-09T11:51:17Z&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;updated_at&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-12-09T11:51:17Z&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;closed_at&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
	<span class="token property">&quot;author_association&quot;</span><span class="token operator">:</span> <span class="token string">&quot;OWNER&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;active_lock_reason&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
	<span class="token property">&quot;body&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
	<span class="token property">&quot;closed_by&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
	<span class="token property">&quot;performed_via_github_app&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
<span class="token punctuation">}</span>
</code></pre></div><p>去你创建的 Github 仓库的 issue 列表看看吧，已经有一条通过 API 创建的 issue 躺在那里了！这是不是很神奇？！</p> <p>如果失败了，请仔细检查 URL，Token，Body 这些是否都带上了。Postman 左上角有个 Code 按钮，可以查看当前配置的请求最终生成的 HTTP 请求，可以方便的 Debug。</p> <h3 id="获取-issue-列表和详情"><a href="#获取-issue-列表和详情" class="header-anchor">#</a> 获取 issue 列表和详情</h3> <p>详细讲解了第一个 API 的使用后，后面的 API 调用其实是大同小异。这个时候我们需要在 Postman 中点 + 号创建一个新的请求（可能后面还要用之前创建的请求），然后继续填写参数。</p> <p>首先我们可以通过列表接口，获取到仓库的 issue 列表，我们看看列表中有没有我们之前创建的 issue。</p> <p><a href="https://docs.github.com/en/free-pro-team@latest/rest/reference/issues#list-repository-issues" target="_blank" rel="noopener noreferrer">List Repository Issues<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>然后我们可以通过 issue 详情接口，获取 issue 的内容：</p> <p><a href="https://docs.github.com/en/free-pro-team@latest/rest/reference/issues#get-an-issue" target="_blank" rel="noopener noreferrer">Get an Issue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="更新-issue"><a href="#更新-issue" class="header-anchor">#</a> 更新 issue</h3> <p>接下来我们可以对 Issue 做更新：</p> <p><a href="https://docs.github.com/en/free-pro-team@latest/rest/reference/issues#update-an-issue" target="_blank" rel="noopener noreferrer">Update an Issue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>更新之后可以再用之前的 Get 接口看看是否更新成功。</p> <h3 id="发表-issue-的评论-列出-issue-评论"><a href="#发表-issue-的评论-列出-issue-评论" class="header-anchor">#</a> 发表 issue 的评论，列出 Issue 评论</h3> <p>Issue 可以被评论，我们可以通过接口发表评论：</p> <p><a href="https://docs.github.com/en/free-pro-team@latest/rest/reference/issues#create-an-issue-comment" target="_blank" rel="noopener noreferrer">Create an Issue Comment<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>发表后可以通过 List 接口查看评论：</p> <p><a href="https://docs.github.com/en/free-pro-team@latest/rest/reference/issues#list-issue-comments" target="_blank" rel="noopener noreferrer">List Issue Comments<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="拓展"><a href="#拓展" class="header-anchor">#</a> 拓展</h3> <ul><li>Issue 有状态，可以被打开（open）或者关闭（closed）。这个状态的更新可以通过哪个接口实现？试试你能不能通过 API 修改一个 issue 的状态</li> <li>浏览 Github API 的 <a href="https://docs.github.com/en/free-pro-team@latest/rest/reference" target="_blank" rel="noopener noreferrer">Reference<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，这里列出了所有的 API。这些 API 是按什么规律归类的？每种类别点进去之后右侧的目录又是按什么归类的？这说明 API 设计和编写应该按什么思路？</li> <li>除了 Postman，还有什么工具可以用来发送 HTTP 请求？尝试其他的工具，比如 <code>curl</code> 和 <a href="https://blog.csdn.net/gobitan/article/details/4790049" target="_blank" rel="noopener noreferrer"><code>telnet</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</li> <li>尝试在浏览器中，通过 fetch API 发送 HTTP 请求给 Github。</li> <li>在浏览器中有<a href="https://cloud.tencent.com/developer/article/1504163" target="_blank" rel="noopener noreferrer">跨域限制<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，为什么 Github API 不会报跨域错误？它是通过哪种办法实现跨域的？</li> <li>通过 Header 传信息认证是一种方式，HTTP 和浏览器支持一种叫 Cookie 的特性，这是更传统的传递认证信息的方式。这两者的差异是什么？我们应该如何选择？可以对 Cookie 做一些了解，然后参考 <a href="https://stackoverflow.com/a/35059874" target="_blank" rel="noopener noreferrer">Stack Overflow 回答<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</li></ul> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <p>通过这个 Lab，我们实战了 HTTP 请求的发送，通过使用 Github 提供的 REST API，实现了对 issue 资源的增删改查。</p> <p>一方面大家对 HTTP 和 REST API 有了实际的感受。另一方面，也希望大家通过对 Github API 的使用，了解到怎样的 API 是好用的，怎样的设计才是比较经典的 REST API 设计。接口一般是后端编写，但接口的定义是前后端一起讨论的。所以大家也需要了解相关的知识。</p> <p>如果觉得这个 Lab 对你有帮助，请在博客，进度，等等地方公开的写一下自己的收获，分享交流，多多思考，这样才能真正的吸收知识。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/101/fe/component.html" class="prev">
        组件化
      </a></span> <span class="next"><a href="/101/fe/lab_module.html">
        Lab: 使用 Webpack 对 JS 应用进行构建
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/101/assets/js/app.e846d27b.js" defer></script><script src="/101/assets/js/2.62095aff.js" defer></script><script src="/101/assets/js/12.368e3d38.js" defer></script>
  </body>
</html>
